<!-- templates/profiles/profile.html -->
{% extends 'base.html' %}
{% load static %}
{% block title %}Profile{% endblock %}
{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow">
            <div class="card-header {% if user.role == 'SUPERADMIN' %}bg-success{% else %}bg-primary{% endif %} text-white">
                <h4 class="mb-0"><i class="fas fa-user"></i> My Profile</h4>
            </div>
            <div class="card-body">
                <div class="d-flex align-items-center mb-4 gap-4">
                    <div class="text-center">
                        {% if profile.profile_picture %}
                            <img src="{{ profile.profile_picture.url }}?v={% now 'U' %}"
                                 alt="Profile Picture"
                                 class="rounded-circle shadow-sm"
                                 style="width: 150px; height: 150px; object-fit: cover; border: 3px solid #e9ecef;">
                        {% else %}
                            <div class="rounded-circle bg-secondary d-inline-flex align-items-center justify-content-center shadow-sm" 
                                 style="width: 150px; height: 150px; border: 3px solid #e9ecef;">
                                 <i class="fas fa-user fa-4x text-white"></i>
                            </div>
                        {% endif %}
                    </div>
                    <div class="flex-grow-1">
                        <div class="fw-bold" style="font-size: 45px; line-height: 1.1;">{{ user.get_full_name }}</div>
                        <div class="text-muted">{{ user.email }}</div>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <strong>Employee ID:</strong>
                        <p class="text-muted">{{ user.employee_id }}</p>
                    </div>
                    <div class="col-md-6">
                        <strong>Role:</strong>
                        <p class="text-muted">{{ user.get_role_display }}</p>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <strong>First Name:</strong>
                        <p class="text-muted">{{ user.first_name }}</p>
                    </div>
                    <div class="col-md-6">
                        <strong>Last Name:</strong>
                        <p class="text-muted">{{ user.last_name }}</p>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <strong>Email:</strong>
                        <p class="text-muted">{{ user.email }}</p>
                    </div>
                    <div class="col-md-6">
                        <strong>WhatsApp:</strong>
                        <p class="text-muted">{{ user.whatsapp_country_code }} {{ user.whatsapp_no }}</p>
                    </div>
                </div>
                
                <div class="mb-3">
                    <strong>Last Qualification:</strong>
                    <p class="text-muted">{{ user.last_qualification }}</p>
                </div>
                
                <div class="mb-3">
                    <strong>Member Since:</strong>
                    <p class="text-muted">{{ user.date_joined|date:"F d, Y" }}</p>
                </div>
                
                <hr>
                
                <div class="d-grid gap-2">
                    {% if user.role != 'SUPERADMIN' %}
                        <a href="{% url 'profiles:update_request' %}" class="btn btn-primary">
                            <i class="fas fa-edit"></i> Request Profile Update
                        </a>
                    {% endif %}
                    
                    <a href="{% url 'profiles:change_password' %}" class="btn btn-warning">
                        <i class="fas fa-key"></i> Change Password
                    </a>
                    
                    {% if user.role == 'SUPERADMIN' %}
                        <a href="{% url 'superadmin:dashboard' %}" class="btn btn-secondary">
                            <i class="fas fa-arrow-left"></i> Back to Dashboard
                        </a>
                    {% else %}
                        <a href="{% url 'marketing:dashboard' %}" class="btn btn-secondary">
                            <i class="fas fa-arrow-left"></i> Back to Dashboard
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
