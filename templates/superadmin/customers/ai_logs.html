{% extends 'base.html' %}
{% block content %}
<h2>AI Request / Operation Logs</h2>
<p class="text-muted">Inputs, outputs, coins spent, status.</p>
<div class="card shadow-sm">
  <div class="card-body table-responsive">
    <table class="table table-hover mb-0">
      <thead class="table-light">
        <tr>
          <th>SL No</th>
          <th>Customer ID</th>
          <th>Customer Name</th>
          <th>Service</th>
          <th>Coins</th>
          <th>Status</th>
          <th>Time</th>
        </tr>
      </thead>
      <tbody>
        {% if logs %}
          {% for row in logs %}
          <tr>
            <td>{{ row.sl_no }}</td>
            <td>{{ row.customer_id|default:"" }}</td>
            <td>{{ row.customer_name|default:"" }}</td>
            <td>{{ row.service }}</td>
            <td>{{ row.coins }}</td>
            <td>{{ row.status }}</td>
            <td>{{ row.time|date:"Y-m-d H:i" }}</td>
          </tr>
          {% endfor %}
        {% else %}
        <tr>
          <td colspan="7" class="text-center text-muted">No logs yet.</td>
        </tr>
        {% endif %}
      </tbody>
    </table>
  </div>
  <div class="card-footer bg-white">
    {% if page_obj %}
      <div class="d-flex flex-wrap justify-content-between align-items-center gap-2">
        <div class="text-muted small"><strong>Total:</strong> {{ page_obj.paginator.count }}</div>
        <div class="text-muted small"><strong>{{ page_obj.paginator.per_page }}</strong> per page</div>
        <div class="text-muted small">
          {% if page_obj.paginator.count %}
            Showing {{ page_obj.start_index }} - {{ page_obj.end_index }}
          {% else %}
            Showing 0 - 0
          {% endif %}
        </div>
        <div class="btn-group">
          {% if page_obj.has_previous %}
            <a class="btn btn-sm btn-outline-secondary" href="{{ pagination_base }}page=1">&laquo;</a>
            <a class="btn btn-sm btn-outline-secondary" href="{{ pagination_base }}page={{ page_obj.previous_page_number }}">&lsaquo;</a>
          {% else %}
            <span class="btn btn-sm btn-outline-secondary disabled">&laquo;</span>
            <span class="btn btn-sm btn-outline-secondary disabled">&lsaquo;</span>
          {% endif %}
          <span class="btn btn-sm btn-outline-primary disabled">
            {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}
          </span>
          {% if page_obj.has_next %}
            <a class="btn btn-sm btn-outline-secondary" href="{{ pagination_base }}page={{ page_obj.next_page_number }}">&rsaquo;</a>
            <a class="btn btn-sm btn-outline-secondary" href="{{ pagination_base }}page={{ page_obj.paginator.num_pages }}">&raquo;</a>
          {% else %}
            <span class="btn btn-sm btn-outline-secondary disabled">&rsaquo;</span>
            <span class="btn btn-sm btn-outline-secondary disabled">&raquo;</span>
          {% endif %}
        </div>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
